(venv) root@debian-8gb-hel1-llmgenerator:/opt/llmready# # Run generation test
python3 scripts/test_generation_workflow.py

============================================================
üß™ LLMReady Generation Workflow Test (Production)
============================================================

INFO: Testing Docker availability...
SUCCESS: Docker installed: Docker version 28.5.1, build e180ab8
SUCCESS: mdream Docker image found
INFO: Testing npx availability...
WARNING: npx not installed
INFO:
=== Testing Database Connectivity ===
INFO: Total users in database: 0
INFO: Total websites in database: 0
INFO: Total generations in database: 0
INFO:
=== Testing Celery/Redis Connectivity ===
SUCCESS: Registered Celery tasks: 4
INFO:   - app.tasks.scheduled.sync_stripe_subscriptions
INFO:   - app.tasks.scheduled.cleanup_old_generations
INFO:   - app.tasks.generation.generate_llm_content
INFO:   - app.tasks.scheduled.reset_monthly_quotas
ERROR: Celery/Redis error: [Errno 2] No such file or directory: 'redis-cli'
INFO:
=== Testing Crawler with Simple Website ===
INFO: Created temp directory: /tmp/llmready_test_bwnclt2u
INFO: Testing crawler with: https://example.com
SUCCESS: Crawler succeeded in 5.99s
INFO: Generated 3 files
SUCCESS: llms.txt exists (57 bytes)
INFO: Content preview:
# Example Domain

## Pages

- [Example Domain](index.md)
...
INFO: Testing ZIP creation: /tmp/llmready_test_bwnclt2u.zip
SUCCESS: ZIP created successfully (696 bytes)
INFO: Cleaned up temp directory

============================================================
üìä TEST SUMMARY
============================================================
DOCKER: ‚úÖ PASS
NPX: ‚ùå FAIL
DATABASE: ‚úÖ PASS
CELERY: ‚ùå FAIL
CRAWLER: ‚úÖ PASS

‚ö†Ô∏è  Some tests failed. Review errors above.

üí° Recommendations:
  3. Restart Celery worker: sudo systemctl restart llmready-celery-worker
============================================================

(venv) root@debian-8gb-hel1-llmgenerator:/opt/llmready#




(venv) root@debian-8gb-hel1-llmgenerator:/opt/llmready# # Run Stripe test
python3 scripts/test_stripe_subscription.py

============================================================
üí≥ LLMReady Stripe Subscription Test (Production)
============================================================

INFO:
=== Testing Stripe Connection ===
Traceback (most recent call last):
  File "/opt/llmready/scripts/test_stripe_subscription.py", line 41, in test_stripe_connection
    products = stripe.Product.list(limit=3)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/llmready/venv/lib/python3.11/site-packages/stripe/_product.py", line 307, in list
    result = cls._static_request(
             ^^^^^^^^^^^^^^^^^^^^
  File "/opt/llmready/venv/lib/python3.11/site-packages/stripe/_api_resource.py", line 172, in _static_request
    return _APIRequestor._global_instance().request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/llmready/venv/lib/python3.11/site-packages/stripe/_api_requestor.py", line 201, in request
    resp = requestor._interpret_response(rbody, rcode, rheaders, api_mode)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/llmready/venv/lib/python3.11/site-packages/stripe/_api_requestor.py", line 859, in _interpret_response
    self.handle_error_response(
  File "/opt/llmready/venv/lib/python3.11/site-packages/stripe/_api_requestor.py", line 342, in handle_error_response
    raise err
stripe._error.AuthenticationError: Invalid API Key provided: sk_test_*********here

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/llmready/scripts/test_stripe_subscription.py", line 332, in <module>
    sys.exit(main())
             ^^^^^^
  File "/opt/llmready/scripts/test_stripe_subscription.py", line 283, in main
    "stripe_connection": test_stripe_connection(),
                         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/llmready/scripts/test_stripe_subscription.py", line 45, in test_stripe_connection
    except stripe.error.AuthenticationError as e:
           ^^^^^^^^^^^^
AttributeError: module 'stripe' has no attribute 'error'. Did you mean: '_error'?


(venv) root@debian-8gb-hel1-llmgenerator:/opt/llmready# sudo ./scripts/install-docker.sh
==========================================
Installing Docker for LLMReady
==========================================
Updating package index...
Hit:1 http://deb.debian.org/debian bookworm InRelease
Hit:2 http://deb.debian.org/debian bookworm-updates InRelease
Get:3 http://security.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Hit:4 https://download.docker.com/linux/debian bookworm InRelease
Hit:5 http://mirror.hetzner.com/debian/packages bookworm InRelease
Hit:6 http://mirror.hetzner.com/debian/packages bookworm-backports InRelease
Hit:7 http://mirror.hetzner.com/debian/packages bookworm-updates InRelease
Hit:8 http://mirror.hetzner.com/debian/security bookworm-security InRelease
Fetched 48.0 kB in 1s (45.2 kB/s)
Reading package lists... Done
Installing prerequisites...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
ca-certificates is already the newest version (20230311+deb12u1).
curl is already the newest version (7.88.1-10+deb12u14).
gnupg is already the newest version (2.2.40-1.1+deb12u1).
lsb-release is already the newest version (12.0-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Adding Docker GPG key...
File '/etc/apt/keyrings/docker.gpg' exists. Overwrite? (y/N) N
Enter new filename:
gpg: no valid OpenPGP data found.
gpg: dearmoring failed: File exists